# Product Requirements Document (PRD)
## YouTube 影片排程總結系統

### 1. Introduction/Overview

本系統旨在為個人用戶和研究人員提供一個便捷的 YouTube 影片批量處理和總結平台。用戶可以透過直觀的 Web 介面添加一個或多個 YouTube 網址到排程中，系統會自動處理這些影片並生成高品質的總結內容。

**主要問題解決：**
- 提高 YouTube 影片總結的批量處理效率
- 提供統一的歷史記錄管理
- 確保總結品質的一致性

### 2. Goals

1. **提升處理效率**：支援單個或批量 YouTube 網址的排程處理
2. **改善用戶體驗**：提供清晰的狀態追蹤和歷史記錄檢視
3. **確保系統穩定性**：實現完善的錯誤處理和重試機制
4. **提升總結品質**：解決現有的 `<think>` 標籤干擾問題
5. **增強資料管理**：支援標籤分類和永久儲存

### 3. User Stories

#### 3.1 基本功能
- **作為研究人員**，我希望能夠一次性輸入多個 YouTube 網址，這樣我就可以批量處理相關影片而不需要逐一操作
- **作為個人用戶**，我希望能夠清楚看到每個影片的處理狀態，這樣我就能知道哪些已完成、哪些正在進行
- **作為用戶**，我希望能夠查看已處理影片的歷史記錄，這樣我就能快速找到之前總結的內容

#### 3.2 進階功能
- **作為用戶**，我希望在處理失敗時能看到具體的錯誤訊息，這樣我就能判斷是否需要重試或移除該項目
- **作為研究人員**，我希望能夠為影片添加標籤和分類，這樣我就能更好地組織和檢索內容
- **作為用戶**，我希望能夠點擊查看影片的詳細資訊，包括完整摘要和關鍵字

### 4. Functional Requirements

#### 4.1 排程管理系統
1. 系統必須支援單個 YouTube 網址輸入
2. 系統必須支援多個 YouTube 網址的批量輸入（支援換行分隔或逗號分隔）
3. 系統必須驗證輸入的 YouTube 網址格式正確性
4. 系統必須將有效的網址自動加入處理排程
5. 系統必須支援暫停、取消和重新排程功能
6. 系統必須實現重試機制，失敗的任務可以重新排程

#### 4.2 狀態監控 API
7. 系統必須提供 API 端點查詢所有排程項目的狀態
8. 系統必須區分以下狀態：待處理、處理中、已完成、失敗
9. 系統必須提供 API 端點查詢特定影片的處理進度
10. 系統必須支援 webhook 通知機制，當處理完成時發送通知

#### 4.3 前端使用者介面
11. 系統必須提供輸入欄位供用戶貼上 YouTube 網址
12. 系統必須在主頁面顯示當前排程中的所有項目及其狀態
13. 系統必須提供歷史記錄頁面，以分頁方式顯示（每頁 20 筆）
14. 歷史記錄必須顯示：影片標題、影片超連結、關鍵字
15. 系統必須提供詳細檢視頁面，顯示：標題、易讀格式的影片時長、完整摘要、關鍵字、處理時間
16. 系統必須支援標籤和分類功能，用戶可以為影片添加自定義標籤

#### 4.4 資料處理與儲存
17. 系統必須使用資料庫永久儲存所有處理記錄
18. 系統必須過濾和清理 AI 回應中的 `<think>` 標籤內容
19. 系統必須限制處理影片長度不超過 30 分鐘
20. 系統必須拒絕處理私人影片和地區限制影片

#### 4.5 錯誤處理
21. 系統必須記錄處理失敗的詳細錯誤訊息
22. 系統必須在前端顯示失敗原因，幫助用戶判斷後續動作
23. 系統必須提供從排程中移除失敗項目的功能
24. 系統必須在 YouTube API 配額耗盡時給出明確提示

### 5. Non-Goals (Out of Scope)

本版本**不包含**以下功能：
- 優先級排程設定
- 定時自動處理功能
- 影片內容匯出功能
- 多語言介面支援
- 移動端專用介面
- 社群分享功能
- 付費方案或用戶管理系統

### 6. Design Considerations

#### 6.1 使用者介面設計
- 採用桌面優先的響應式設計
- 使用簡潔直觀的介面元素
- 狀態指示器使用顏色編碼（綠色=完成，藍色=處理中，紅色=失敗，灰色=待處理）
- 提供清晰的導航結構

#### 6.2 資料呈現
- 影片時長轉換為易讀格式（如：20分18秒）
- 關鍵字以標籤形式呈現
- 支援關鍵字和標籤的點擊過濾功能

### 7. Technical Considerations

#### 7.1 前端技術
- 建議使用 React 或 Vue.js 等主流前端框架
- 採用組件化設計，便於維護和擴展
- 使用 TypeScript 提高代碼品質

#### 7.2 後端技術
- 基於現有專案架構（Python/Node.js）
- 實現 RESTful API 設計
- 使用背景任務處理機制（如 Celery 或 Bull Queue）

#### 7.3 資料庫設計
- 使用 SQLite（開發階段）或 PostgreSQL（生產階段）
- 設計影片記錄、標籤、處理狀態等相關資料表
- 建立適當的索引以優化查詢效能

#### 7.4 整合考量
- 與現有 YouTube 轉錄處理模組整合
- 保持與現有 AI 模型呼叫邏輯的相容性
- 考慮 YouTube API 配額限制的處理策略

### 8. Success Metrics

#### 8.1 功能指標
- 影片處理成功率 > 95%
- 系統回應時間 < 2 秒
- 批量處理效率提升 > 50%

#### 8.2 用戶體驗指標
- 用戶介面操作直覺性評分 > 4.5/5
- 錯誤處理滿意度 > 90%
- 歷史記錄檢索效率提升 > 60%

#### 8.3 系統穩定性指標
- 系統可用性 > 99%
- 處理失敗自動重試成功率 > 80%

### 9. Open Questions

1. **API 配額管理**：如何在達到 YouTube API 配額限制時優雅地處理？是否需要實現配額監控和預警？

2. **並發處理**：同時處理多個影片時的最佳並發數量是多少？如何平衡處理速度和系統資源？

3. **資料保存期限**：歷史記錄是否需要設定自動清理機制？多久清理一次？

4. **標籤系統**：標籤是否需要支援階層分類？是否需要預設標籤或自動標籤建議？

5. **通知機制**：除了 webhook，是否需要支援其他通知方式（如郵件、即時通知）？

6. **性能優化**：對於大量歷史記錄的分頁載入，是否需要實現無限滾動或虛擬滾動？

---

*此文件最後更新：2025-07-06*